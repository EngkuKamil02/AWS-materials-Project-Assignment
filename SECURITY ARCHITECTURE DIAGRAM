┌─────────────────────────────────────────────────────────────┐
│                   SECURITY LAYERS                           │
└─────────────────────────────────────────────────────────────┘

# 1. NETWORK SECURITY
   ┌────────────────────────────────┐
   │  Security Group: Web-SG        │
   │  ┌──────────────────────────┐  │
   │  │ Inbound Rules:           │  │
   │  │ - SSH (22): 0.0.0.0/0    │  │
   │  │ - HTTP (80): 0.0.0.0/0   │  │
   │  │ - HTTPS (443): 0.0.0.0/0 │  │
   │  └──────────────────────────┘  │
   └────────────────────────────────┘
             │
             ▼
   ┌────────────────────────────────┐
   │  Security Group: DB-SG         │
   │  ┌──────────────────────────┐  │
   │  │ Inbound Rules:           │  │
   │  │ - MySQL (3306): Web-SG   │  │
   │  │ (Only from web servers)  │  │
   │  └──────────────────────────┘  │
   └────────────────────────────────┘

# 2. IAM SECURITY
   ┌────────────────────────────────┐
   │  IAM Role: EC2-Role            │
   │  ┌──────────────────────────┐  │
   │  │ Policies:                │  │
   │  │ - S3FullAccess           │  │
   │  │                          │  │
   │  │ Benefits:                │  │
   │  │ - No hardcoded keys      │  │
   │  │ - Automatic credential   │  │
   │  │   rotation               │  │
   │  └──────────────────────────┘  │
   └────────────────────────────────┘

# 3. APPLICATION SECURITY
   ┌────────────────────────────────┐
   │  PHP Application               │
   │  ┌──────────────────────────┐  │
   │  │ - Password hashing       │  │
   │  │ - SQL injection protect  │  │
   │  │ - XSS prevention         │  │
   │  │ - File validation        │  │
   │  │ - Session management     │  │
   │  └──────────────────────────┘  │
   └────────────────────────────────┘

# 4. DATA SECURITY
   ┌────────────────────────────────┐
   │  S3 Bucket                     │
   │  ┌──────────────────────────┐  │
   │  │ - Bucket Policy          │  │
   │  │ - Versioning enabled     │  │
   │  │ - SSE-S3 encryption      │  │
   │  └──────────────────────────┘  │
   └────────────────────────────────┘
             │
             ▼
   ┌────────────────────────────────┐
   │  RDS MySQL                     │
   │  ┌──────────────────────────┐  │
   │  │ - Private subnet only    │  │
   │  │ - Encrypted connections  │  │
   │  └──────────────────────────┘  │
   └────────────────────────────────┘
